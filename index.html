<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="style.css">    
    <title>Calculadora</title>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  </head>

  <body>
    <div class="sidenav">
        <div class="login-main-text">
           <h2>Calculadora<br>  Page</h2>
           <p>Calculadora online Page</p>
        </div>
     </div>
     <div class="main">
        <div class="col-md-6 col-sm-12">
           <div class="form">
            <br/>
            <br/>
            <br/>
              <form>
                 <div class="form-group">
                    <label>Dato1</label>
                    <input id = "dato1"type="text" class="form-control" placeholder="Dato1">
                 </div>
                 <div class="form-group">
                    <label>Dato2</label>
                    <input name= "dato2" id = "dato2"type="text" class="form-control" placeholder="Dato2">
                 </div>
                 <button onclick="Sumar()" type="button" class="btn btn-black">+</button>
                 <button onclick="Registrarse()" type="button" class="btn btn-black">-</button>
                 <button onclick="Registrarse()" type="button" class="btn btn-black">*</button>
                 <button onclick="Registrarse()" type="button" class="btn btn-black">/</button>
                 <button onclick="Registrarse()" type="button" class="btn btn-black">^</button>
                 <button onclick="Registrarse()" type="button" class="btn btn-black">&radic;</button>
                 <div class="form-group">
                    <label>Resultado</label>
                    <input name = "resultado"id = "resultado"type="text" class="form-control" placeholder="Resultado">
                 </div>
                 <br> 
                 <br> 
                 <br> 
                 <br> 
                 <br> 
                 <div style="height:300px;width:300px;border:1px solid #ccc;font:16px/26px Georgia, Garamond, Serif;overflow:auto;">
                   
                    </div>
              </form>
           </div>
        </div>
     </div>


  <script
        src="https://code.jquery.com/jquery-3.5.1.js"
        integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
        crossorigin="anonymous"></script>

  <script>

   function Sumar(){
    
     var dato1 = document.querySelector('#dato1').value
     var dato2 = document.querySelector('#dato2').value
     
     var objeto = {
         'a': dato1,
         'b': dato2
     }

     console.log(objeto)
     var bbody = JSON.stringify(objeto)
     console.log(bbody)
     fetch('http://localhost:5000/suma', {
     method: 'POST', 
     body: bbody, 
     headers:{
         'Content-Type': 'application/json'
     }

     }).then(res => res.json())
     .catch(err => {
     console.error('Error:', err)
     alert("Ocurrio un error, ver la consola")
     })
     .then(response =>{

     console.log(response);
     console.log(response.mensaje);
     console.log(response.resultado);

     if(response.message == "Failed"){
         alert("No has ingresado las credencilaes correctas")
     }else{
         colocarResultado(response.mensaje, response.resultado)
     }
     }) 
   }

   function colocarResultado(mensaje, resultado){
    $("#resultado").val(resultado)
   }
</script>
</body>

</html>